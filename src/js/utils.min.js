!function($){function localize(empty,lng){var suff=empty?" (creating)":" (editing)";if(lng)switch(lng){case"uk":suff=empty?" (створення)":" (редагування)";break;case"pol":suff=empty?" (tworzenie)":" (redagowanie)";break;default:suff=empty?" (creating)":" (editing)"}return suff}$.fn.setTitleModal=function(title,id,lng){var suff;title+=localize(apex.item(id).isEmpty(),lng),apex.util.getTopApex().jQuery(".ui-dialog-content").dialog("option","title",title)},$.fn.setTitle=function(title,id,staticID,lng){var q="#"+staticID+"_heading",suff;title+=localize(apex.item(id).isEmpty(),lng),apex.util.getTopApex().jQuery(q).text(title)},$.fn.setTitleBreadCrumb=function(title,id,className,lng){var suff;title+=localize(apex.item(id).isEmpty(),lng),apex.util.getTopApex().jQuery(className).last().text(title)},$.fn.setTitleModalLast=function(title,id,lng){var suff;title+=localize(apex.item(id).isEmpty(),lng),apex.util.getTopApex().jQuery(".ui-dialog-title").last().text(title)},$.fn.enableTitleHide=function(){var prevScrollpos=window.pageYOffset;window.onscroll=function(){var currentScrollPos=window.pageYOffset;document.getElementById("t_Body_title").style.top=prevScrollpos>currentScrollPos&&currentScrollPos<20?"48px":"-48px",prevScrollpos=currentScrollPos}},$.fn.redirectToPage=function(page,sel,params){params=null==params?null:params,apex.server.process("GET_URL",{x01:page,x02:params},{dataType:"text",success:function(pData){var v_dataParsed=JSON.parse(pData);if(v_dataParsed.success){var lnk=v_dataParsed.url.replace("apex.navigation.dialog.close(true,function(pDialog){ ","");lnk=lnk.replace(" });",""),lnk=lnk.replace("pDialog","null"),lnk=lnk.replace("this",sel),eval(lnk)}else apex.message.alert("err: GET_URL proccess failed")}})},$.fn.getUserRoles=function(execLogic){apex.server.process("GET_USER_ROLES",{x01:null},{dataType:"text",success:function(pData){var v_dataParsed=JSON.parse(pData);v_dataParsed.success?execLogic(v_dataParsed.roles):console.log("err: GET_USER_ROLES proccess failed")}})},$.fn.clickabelizeReportRows=function(){var eventName="click";this.find("tbody tr").each((function(key,val){var list=$(val).find("th");if(!(list.length>0&&$(list[0]).hasClass("a-IRR-header"))){var arr=$(val).find("td>a"),link,url;arr.length>0&&(link=arr[0],url=$(arr[0]).attr("href"),$(link).on("click",(function(e){e.preventDefault()}))),link&&$(val).on("click",(function(e){apex.navigation.redirect(url)}))}}))},$.fn.customizeNumberInput=function(n_length,n_precision,allowNegative){var demical,whole;demical="",whole="",allowNegative=null==allowNegative||allowNegative,n_precision=null==n_precision?0:n_precision,n_length=null==n_length?0:n_length;for(var i=0;i<n_precision;i++)demical+="0";whole="0,"+demical;for(var u=0;u<this.length;u++){var _id;_id="#"+this[u].id,allowNegative||$(_id).prop("min",0),$(_id).on("input",(function(e){var pat,val=this.value;if("string"!=typeof val&&(val=""),n_length===val.length-1){var suprl=val[val.length-1],old=val.substr(0,val.length-1);","!=suprl&&n_precision>0&&old.indexOf(",")<0&&(val=old+","+suprl)}allowNegative?(pat=0===n_precision?"^-?\\d{0,"+n_length+"}":"^-?\\d{0,"+n_length+"}(\\.\\d{0,"+n_precision+"})?",val=val.match(new RegExp(pat))[0],whole="-"+whole):(pat=0===n_precision?"\\d{0,"+n_length+"}":"\\d{0,"+n_length+"}(\\.\\d{0,"+n_precision+"})?",val=val.match(new RegExp(pat))[0]),val.length>=2&&(0==val[0]&&","!=val[1]||","==val[0]&&0==val[1]?val=val.substr(val.length-1):"-"==val[0]&&","==val[1]&&2===val.length?val="-":3===val.length?"-"==val[0]&&0==val[1]&&","!=val[2]&&(val="-"+val.substring(2)):val.toString()===whole&&(val=0)),this.value=val})).on("blur",(function(e){"string"==typeof this.value&&"-"!==this.value?this.value=Number(this.value):this.value=0}))}},$.fn.putCursorAtEnd=function(){return this.each((function(){var $el=$(this),el=this;if($el.is(":focus")||$el.focus(),el.setSelectionRange){var len=2*$el.val().length;setTimeout((function(){el.setSelectionRange(len,len)}),1)}else $el.val($el.val());this.scrollTop=999999}))},$.fn.enableNotEditableText=function(){return this.each((function(){$(this).select((function(){let sel,range,text,el,val,confirmMsg;confirmMsg="Закріпити виділений текст?",window.getSelection?(sel=window.getSelection(),text=sel.toString(),text.length>0&&(el=document.getElementById($(this)[0].id),apex.message.confirm(confirmMsg,(function(okPressed){okPressed&&(text='<span class="home-work-not-editable">'+text+"</span>",val=el.value,el.value=val.slice(0,el.selectionStart)+text+val.slice(el.selectionEnd))})))):document.selection&&"Control"!=document.selection.type&&(text=document.selection.createRange().text)}))}))}}(jQuery);